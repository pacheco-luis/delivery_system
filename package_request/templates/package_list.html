{% extends 'base.html' %}
{% load static %}

{% block title %}Packages{% endblock title %}

{% block content %}
<div id="pack-list-body" style="padding: 0 2em; width: 100;">
    <div>
        <h1 style="padding: 0.5em; text-align: center;">Active Packages</h1>
    </div>
    <div style="overflow-x:auto;">
        <table class="pack-list-table" style="width:100%;">
            <colgroup>
                <col style="width: 10%;">
                <col style="width: 15%;">
                <col style="width: 15%;">
                <col style="width: 20%;">
                <col style="width: 25%;">
                <col style="width: 15%;">
            </colgroup>
            <tr>
                <th>Sender:</th>
                <th>Receiver:</th>
                <th>Date:</th>
                <th>Destination:</th>
                <th>Item Description:</th>
                <th>Driver:</th>
            </tr>
            {% if package_list %}
                {% for package_obj in package_list %}
                    <tr>
                        <td>{{ user.first_name }}</td>
                        <td>{{ package_obj.recipient_name }}</td>
                        <td>{{ package_obj.order_date }}</td>
                        <td>{{ package_obj.recipient_address }}</td>
                        <td>{{ package_obj.package_description }}</td>
                        <td>
                            <button class = "ps_del_button" onclick="document.getElementById('deleteModal{{ package_obj.package_id }}').style.display='block'">Delete Request</button>
                            <button class = "ps_view_button" onclick="document.getElementById('viewModal{{ package_obj.package_id }}').style.display= 'block'">View Request</button>
                            <div id="deleteModal{{ package_obj.package_id }}" class="ps_modal">
                                <span onclick="document.getElementById('deleteModal{{ package_obj.package_id }}').style.display='none'" class="ps_close" title="Close">×</span>
                                <div class="ps_modal-content">
                                    <div class="ps_cont"> 
                                        <h1>You are about to delete a request</h1>
                                        <p>Are you sure you want to delete this request?</p>
                                        <div class="clearfix">
                                            <button type="button" onclick="document.getElementById('deleteModal{{ package_obj.package_id }}').style.display='none'" class="ps_cancelbtn ps_del_button">Cancel</button>
                                            <a href="{% url 'package_request_app:delete_request' id=package_obj.package_id %}"><button type="button" class="ps_deletebtn ps_del_button">Delete</button></a>
                                        </div>
                                        </div>
                                    </div>
                                </div> 
                            </div>
                            <div id="viewModal{{ package_obj.package_id}}" class = "ps_modal" >
                                <div class="ps_view_cont"> 
                                    <span onclick="document.getElementById('viewModal{{ package_obj.package_id }}').style.display='none'" class="ps_close" title="Close">×</span>
                                    <h2>This is the information of your active request: </h2><br>
                                    <p><b>Date and Time: </b> {{ package_obj.order_date }}</p><br>
                                    <p><b>Package ID: </b> {{ package_obj.package_id }}</p><br>
                                    <p><b>Receiver: </b> {{ package_obj.recipient_name }}</p><br>
                                    <p><b>Destination: </b> {{ package_obj.recipient_address}}</p><br>
                                    <p><b>Item Description: </b> {{ package_obj.package_description}}</p><br>
                                
                                </div>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="6" style="background-color: antiquewhite;">
                        <div style="padding: 2em; background-color: antiquewhite;" class="no-pack-div">
                            <img src="{% static 'images/package_listing/empty_package.png' %}" alt="Empty Package Image">
                            <p>You have no package requests made.</p>
                        </div>
                    </td>
                </tr>
            {% endif %}
        </table>
    </div>
</div>
{% endblock content %}

{% block script_files %}
    <script src="{% static 'js/package_list.js' %}"></script>
{% endblock script_files %}
